# Git 협업 워크플로우

---



1. ### 중앙 저장소 생성

   1. ###### 팀원1과 팀원2중 팀원1이 팀장이 되어 중앙 저장소를 생성한다.

   2. ###### 모든 팀 구성원이 git clone 명령으로 중앙 저장소를 복제해서 로컬 저장소를 만든다

      1. ###### 이때, 자동으로 origin이라는 별칭이 붙는다

2. ### 팀원1의 작업

   1. ###### 팀원1은 로컬 저장소를 이용해서 자신의 기능을 개발하고, 변경 내용을 기록한다.

      1. ###### 로컬 저장소는 몇번이고 커밋을 하여 자신의 변경 내용을 아주 작은 단위로 쪼개서 커밋 할 수 있다.

3. ### 팀원2의 작업

   1. ###### 팀원2도 팀원1처럼 로컬 저장소를 만들고, 자신이 맡은 기능을 개발하고, 스테이징하고 커밋한다.

4. ### 팀원1의 push

   1. ###### 팀원1은 git push 명령으로 자신의 로컬 커밋 이력을 중앙 저장소에 올려 다른 팀 구성원과 공유한다.

   2. ```
      git push origin master
      ```

   3. ###### 팀원1과 팀원2가 중앙 저장소를 복제한 후 아무도 중앙 저장소를 변경하지 않았기 때문에, 철이의 푸시는 충돌없이 순조롭게 진행됨.

5. ### 팀원2의 push

   1. ###### 팀원1이 push한 후, 팀원2가 로컬 커밋을 푸시하려하면 에러가 발생한다.

   2. ###### 팀원2의 커밋 이력은 중앙 저장소의 최신 커밋 이력을 포함하고 있지 않기 때문에 푸시를 받아주지 않는다.

6. ### 팀원2의 rebase

   1. ###### 팀원2는 git pull 명령으로 중앙 저장소의 변경 이력을 로컬 저장소로 내려 받는다.

   2. ###### 이 명령어는 중앙 저장소의 최신 이력을 내려 받는 동작과 이를 로컬 이력과 합치는 동작을 한 번에 한다.

   3. ```
      git pull --rebase origin master
      ```

   4. ###### --rebase 옵션을 주면 중앙 저장소의 커밋 이력을 팀원2의 커밋 이력 앞에 끼워 넣는다.

   5. ###### --rebase 옵션 없이 쓸 수도 있지만, 불필요한 병합 커밋을 한 번 더해야 하는 번거로움이 있으므로 --rebase옵션을 쓰는 것이 좋다.

7. ### 팀원2의 충돌 해결

   1. ###### 리베이스는 팀원2의 로컬 커밋을 새로 내려 받은 master 브랜치에 하나 하나 대입하고 대조해가면서 커밋 이력을 재배열한다. 

   2. ###### 이런 동작 특성때문에 커밋 이력도 깔끔하게 유지할 수 있을 뿐만아니라, 경우에 따라 버그를 발견하기도 함.

   3. ###### 팀원1과 팀원2가 서로 다른 기능을 개발했다면, 리베이스 과정에 충돌이 발생할 가능성은 거의 없다. 어쨌든 리베이스 과정에 충돌이 발생하면, git은 현재 커밋에서 리베이스를 멈추고 다음과 같은 메시지를 나타낸다.

   4. <img src="/Users/dkmac/Library/Application Support/typora-user-images/스크린샷 2020-05-12 오전 11.03.53.png" alt="스크린샷 2020-05-12 오전 11.03.53" style="zoom:50%;" />

   5. ###### git status 명령으로 어떤 부분에서 충돌이 발생했는지 알 수 있다.

   6. ###### some-file을 열어서 충돌 부분을 해결하고, git rebase --continue 명령어로 계속 리베이스 진행함.

   7. ###### 리베이스 중에 뭔가 잘못되었다면, git rebase --abort 명령어로 git pull --rebase 명령을 내리기 이전 상태로 되돌릴 수 있다.

   8. ###### 이제 중앙 저장소로 올리면 된다.

###### 